---
title: "LCA part of analysis"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
#------------------
# LOAD LIBRARIES
#------------------
 
library(readxl) #to read csv equipment list and exported data from OneClick
library(ggplot2) # for plotting
library(jtools) # for formatting output summary, i.e., using summ() of models
#library(Gmisc) # for visualizing survey answers...trying sankey diagrams
library(reshape2) #for ggplot of survey answers
library(ggpubr) #for using ggarrange to plot multiple figures together 
#load these last so their function names don't get overridden:
library(tidyverse) #for everything 
library(dplyr) #for everything 
```


```{r}
#------------------
# GET FILES
#------------------
 
files.lca <- 
    list.files(path = "./RawData_doNotUpload/LCAdat", # read all excel fileNAMES from the folder
                       pattern = "*.xls",
                       full.names = TRUE,
                       recursive = FALSE) %>% 
    tbl_df() %>% # make the list into a dataframe, default name of column is "value"
    rename(filenames = value)%>%
    mutate(myFiles = purrr::map(filenames, function(x) {  #for each filename, read in the file (gets nested)
        readxl::read_excel(x,
                           skip=2,
                           col_types = "text")})) %>% 
    unnest(myFiles) 
 

#------------------
# ORGANIZE DATA
#------------------ 
 
dat.lca <-
    files.lca %>%
    select(c(2,6,10,11,14,16)) %>% # keep only columns of interest for this analysis
    rename (GWP = 'Global warming kg CO2e') %>%  
    rename(ID=Comment)  # this is the ID for the component that corresponds with spreadsheet naming convention
  
sums.lca <-
    dat.lca %>%
    drop_na(ID) %>%
    summarise(N=sum(GWP))
#convert GWP to numeric!

    
    
```

